---
import { siteConfig } from '@/config/site';

interface Props {
  data?: object;
}

const { data } = Astro.props;

// Default PhysicalTherapy business schema
const defaultSchema = {
  '@context': 'https://schema.org',
  '@graph': [
    {
      '@type': 'PhysicalTherapy',
      '@id': `${siteConfig.url}/#organization`,
      name: siteConfig.name,
      alternateName: siteConfig.shortName,
      url: siteConfig.url,
      logo: {
        '@type': 'ImageObject',
        url: `${siteConfig.url}/images/logo.png`,
      },
      image: `${siteConfig.url}/images/ashlee-gendron.jpg`,
      description: siteConfig.description,
      email: siteConfig.contact.email,
      priceRange: '$$',
      address: {
        '@type': 'PostalAddress',
        streetAddress: siteConfig.contact.address.street,
        addressLocality: siteConfig.contact.address.city,
        addressRegion: siteConfig.contact.address.state,
        postalCode: siteConfig.contact.address.zip,
        addressCountry: 'US',
      },
      geo: {
        '@type': 'GeoCoordinates',
        latitude: siteConfig.contact.geo.lat,
        longitude: siteConfig.contact.geo.lng,
      },
      openingHoursSpecification: [
        {
          '@type': 'OpeningHoursSpecification',
          dayOfWeek: ['Tuesday', 'Wednesday', 'Thursday', 'Friday'],
          opens: '09:00',
          closes: '13:00',
        },
      ],
      founder: {
        '@type': 'Person',
        name: siteConfig.provider.name,
        jobTitle: siteConfig.provider.title,
        description: `${siteConfig.provider.credentials} - ${siteConfig.provider.title} specializing in Pelvic Health and Orthopedics`,
      },
      // Area served
      areaServed: siteConfig.serviceAreas.map((city) => ({
        '@type': city === 'North County San Diego' ? 'AdministrativeArea' : 'City',
        name: city,
        ...(city !== 'North County San Diego' && {
          containedInPlace: {
            '@type': 'State',
            name: 'California',
          },
        }),
      })),
      sameAs: Object.values(siteConfig.social),
      hasOfferCatalog: {
        '@type': 'OfferCatalog',
        name: 'Physical Therapy Services',
        itemListElement: siteConfig.services.map((service) => ({
          '@type': 'Offer',
          itemOffered: {
            '@type': 'Service',
            name: service.name,
            description: service.description,
          },
        })),
      },
    },
    {
      '@type': 'WebSite',
      '@id': `${siteConfig.url}/#website`,
      url: siteConfig.url,
      name: siteConfig.name,
      description: siteConfig.tagline,
      publisher: { '@id': `${siteConfig.url}/#organization` },
      inLanguage: 'en-US',
    },
    {
      '@type': 'FAQPage',
      '@id': `${siteConfig.url}/#faq`,
      mainEntity: siteConfig.faq.map((item) => ({
        '@type': 'Question',
        name: item.question,
        acceptedAnswer: {
          '@type': 'Answer',
          text: item.answer,
        },
      })),
    },
  ],
};

const jsonLd = data || defaultSchema;
---

<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
